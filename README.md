Nesta tarefa foram implementadas duas classes em java: Server.java e Client.java.
Para que o cliente seja executado, primeiramente é necessário que o servidor seja executado. Após executá-los, o cliente será conectado ao servidor, de forma que ambos estão conectados numa mesma porta.
O servidor inicia a comunicação escrevendo a seguinte mensagem no buffer de comunicação:
“Servidor online”, desta forma, quando o cliente se conectar, ao ler esta mensagem no buffer, o cliente saberá que seu adversário do jogo, ou seja, o servidor, está disponível. Da mesma forma, o cliente responde escrevendo uma mensagem no buffer de comunicação: “Cliente online”.
Neste exercício, o servidor possui duas matrizes, as quais uma possui dimensões 11x11, e a outra possui dimensões 10x10. A primeira matriz do servidor (11x11) possui uma lina e uma coluna a mais, pois nela a primeira contém os índices das posições, onde a primeira linha é composta por números (de 0 a 9) e sua primeira coluna é composta por letras (de A a J). Esta matriz 11x11 do servidor, inicialmente começa vazia, e é preenchida no decorrer do jogo, na medida em que o cliente realiza suas jogadas. Esta matriz possui a usabilidade de marcar os acertos e erros do cliente, além de ser utilizada para enviar ao cliente como está o andamento da partida em relação se ele acertou ou errou aquela jogada, marcando as embarcações adversárias que foram atingidas.
A segunda matriz do servidor possui dimensões 10x10. Nesta matriz, o servidor utiliza para alocar suas embarcações em posições sorteadas aleatoriamente.
O cliente também possui sua matriz de embarcações. Porém, a matriz do cliente é preenchida a partir de um arquivo de entrada no formato txt. O cliente preenche o arquivo de forma que onde ele irá substituir os espaços em branco na posição onde ele deseja alocar uma determinada embarcação, utilizando uma letra específica. No caso do porta-aviões, o cliente substituirá os espaços em branco nas posições desejadas por uma letra P, os navios-tanque são alocados utilizando a letra T nas posições desejadas, os contratorpedeiros são representados pela letra C e os submarinos representados pela letra S. As letras no arquivo de entrada podem ser escritas tanto minúscula quanto maiúscula.
Tendo em consideração que há 1 porta-aviões de tamanho 5, há 2 navios-tanque de tamanho 4 cada um, há 3 contratorpedeiros de tamanho 3 cada um, e há 4 submarinos de tamanho 2 cada um, chegamos ao cálculo de que o servidor ou o cliente necessitam realizar (1 x 5) + (2 x 4) + (3 x 3) + (4 x 2) acertos para vencer o jogo. Desta forma, um deles precisa realizar 30 acertos para vencerem o jogo.
Os acertos são computados a partir do momento em que acerta-se uma posição de uma parte de uma embarcação inimiga. Acertar a mesma posição onde havia parte de uma embarcação não computará mais do que apenas um único acerto (quando acertou na primeira vez que atirou naquela posição).
Na entrada de dados, o cliente informa uma letra (de A a J) e um número (de 0 a 9), correspondendo ao seu ataque na posição [i][j] da matriz de embarcações do servidor. Onde i corresponde à letra e j corresponde ao número informado. Caso o cliente queira parar de jogar antes do jogo terminar, o cliente pode encerrar o jogo quando quiser, digitando Fim. Caso o cliente solicite em ver como está sua matriz e quais posições ele acertou e quais ele errou, o cliente digita P, para poder ver estas informações.
Porém, vale lembrar que toda vez que o cliente acertar uma posição em que há uma parte de uma embarcação inimiga, o servidor informará ao cliente que ele acertou. Caso o cliente erre, o servidor o informará que ele errou.
Informações mais detalhadas sobre o funcionamento dos programas do servidor e do cliente, encontram-se nos comentários inclusos nos códigos apresentados.
